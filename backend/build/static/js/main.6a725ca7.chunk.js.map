{"version":3,"sources":["services/login.js","components/Notification.js","App.js","index.js"],"names":["login","credentials","a","axios","post","res","data","Notification","message","className","App","useState","user","setUser","username","setUsername","password","setPassword","errorMessage","setErrorMessage","useEffect","loggedUserJSON","window","localStorage","getItem","JSON","parse","handleLogin","event","preventDefault","console","log","loginService","setItem","stringify","setTimeout","onSubmit","type","value","placeholder","onChange","target","onClick","removeItem","ReactDOM","render","document","getElementById"],"mappings":"qQAQe,GAAEA,MALN,uCAAG,WAAMC,GAAN,eAAAC,EAAA,sEACMC,IAAMC,KAHV,aAGwBH,GAD1B,cACNI,EADM,yBAELA,EAAIC,MAFC,2CAAH,uDCOIC,EARM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAgB,OAAZA,EACK,KAGF,yBAAKC,UAAU,SAASD,IC2ElBE,EA7EH,WAAO,IAAD,EACQC,mBAAS,MADjB,mBACTC,EADS,KACHC,EADG,OAEgBF,mBAAS,IAFzB,mBAETG,EAFS,KAECC,EAFD,OAGgBJ,mBAAS,IAHzB,mBAGTK,EAHS,KAGCC,EAHD,OAIwBN,mBAAS,MAJjC,mBAITO,EAJS,KAIKC,EAJL,KAMhBC,qBAAU,WACR,IAAMC,EAAiBC,OAAOC,aAAaC,QAAQ,cACnD,GAAIH,EAAgB,CAClB,IAAMT,EAAOa,KAAKC,MAAML,GACxBR,EAAQD,MAIT,IAEH,IAAMe,EAAW,uCAAG,WAAMC,GAAN,eAAA1B,EAAA,6DAClB0B,EAAMC,iBACNC,QAAQC,IAAI,kBAAmBjB,EAAUE,GAFvB,kBAIGgB,EAAahC,MAAM,CACpCc,WACAE,aANc,OAIVJ,EAJU,OAQhBU,OAAOC,aAAaU,QAAQ,aAAcR,KAAKS,UAAUtB,IACzDC,EAAQD,GACRkB,QAAQC,IAAI,iBAAkBnB,GAK9BG,EAAY,IACZE,EAAY,IAhBI,kDAkBhBE,EAAgB,eAChBgB,YAAW,WACThB,EAAgB,QACf,KArBa,0DAAH,sDA8BjB,OAAa,OAATP,EAEA,6BACE,qCACA,kBAAC,EAAD,CAAcJ,QAASU,IACvB,0BAAMkB,SAAUT,GACd,2BACEU,KAAK,OACLC,MAAOxB,EACPyB,YAAY,0BACZC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB1B,EAAY0B,EAAOH,UAE/C,2BACED,KAAK,WACLC,MAAOtB,EACPuB,YAAY,WACZC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBxB,EAAYwB,EAAOH,UAE/C,4BAAQD,KAAK,UAAb,aACM,KAKZ,6CACgBzB,EAAKE,SACnB,4BAAQ4B,QA/BS,WACnBpB,OAAOC,aAAaoB,WAAW,cAC/B9B,EAAQ,QA6BN,YCxEN+B,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.6a725ca7.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/login';\n\nconst login = async credentials => {\n  const res = await axios.post(baseUrl, credentials);\n  return res.data;\n};\n\nexport default { login };\n","import React from 'react';\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"error\">{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from 'react';\nimport loginService from './services/login';\n\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [user, setUser] = useState(null);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedUser');\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user);\n      // set token to playlistservice\n      // playlistService.setToken(user.token);\n    }\n  }, []);\n\n  const handleLogin = async event => {\n    event.preventDefault();\n    console.log('logging in with', username, password);\n    try {\n      const user = await loginService.login({\n        username,\n        password\n      });\n      window.localStorage.setItem('loggedUser', JSON.stringify(user));\n      setUser(user);\n      console.log('logged in user', user);\n\n      // set token for user here\n      // playlistService.setToken(user.token);\n\n      setUsername('');\n      setPassword('');\n    } catch (exception) {\n      setErrorMessage('wrong credz');\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 5000);\n    }\n  };\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedUser');\n    setUser(null);\n  };\n\n  if (user === null) {\n    return (\n      <div>\n        <h2>Login</h2>\n        <Notification message={errorMessage} />\n        <form onSubmit={handleLogin}>\n          <input\n            type=\"text\"\n            value={username}\n            placeholder=\"Käyttäjätunnus\"\n            onChange={({ target }) => setUsername(target.value)}\n          />\n          <input\n            type=\"password\"\n            value={password}\n            placeholder=\"Salasana\"\n            onChange={({ target }) => setPassword(target.value)}\n          />\n          <button type=\"submit\">Kirjaudu</button>\n        </form>{' '}\n      </div>\n    );\n  }\n  return (\n    <div>\n      Logged in as {user.username}\n      <button onClick={handleLogout}>logout</button>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}