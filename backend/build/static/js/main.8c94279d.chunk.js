(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{295:function(e,t,a){e.exports=a(524)},523:function(e,t,a){},524:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(43),o=a.n(l),c=a(20),u=a(32),i=a(67),s=(a(304),a(535)),p=a(18),m=a(545),d=a(546),f=a(538),v=a(541),y=a(536),g=a(528),E=a(65),k=a.n(E),b=a(9),O=a.n(b),h=a(12),j="SET_LOADING",x=a(27),w=a.n(x),R=a(365),_=null,T=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},console.log("getting reports from",t),e.next=4,w.a.get("/api/reportslist/".concat(t),a);case 4:return r=e.sent,console.log("reportservice get one report-track data",r.data),e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},console.log("report req id",t),e.next=4,w.a.get("".concat("/api/reports","/").concat(t),a);case 4:return r=e.sent,console.log("reportservice get one report-track data",r.data),e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:_}},e.next=3,w.a.get("/api/reporttransfer",t);case 3:return a=e.sent,console.log("reportservice get all transfers data",a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,w.a.post("".concat("/api/reports"),t,a);case 3:return r=e.sent,console.log("reportservice add track to report",r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,w.a.delete("".concat("/api/reports","/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},console.log("reportdetails req id ",t),e.next=4,w.a.get("/api/reportdetails/".concat(t),a);case 4:return r=e.sent,console.log("reportservice get report details res data",r.data),e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,w.a.post("/api/reportdetails",t,a);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},console.log("reportservice report to update",t),r=w.a.put("/api/reportdetails/".concat(t.id),t,a),console.log(r.data),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{Authorization:_,responseType:"blob"}},e.next=4,w.a.get("/api/reporttransfer/".concat(t),a);case 4:r=e.sent,R(r.data,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),M={setToken:function(e){_="bearer ".concat(e)},addTrackToReport:C,deleteTrackFromReport:P,getOne:D,getAllByDate:T,getAllTransfers:S,getReportDetails:L,createReport:A,updateReport:F,downloadReport:I},G=function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j}),t.next=4,M.getOne(e);case 4:r=t.sent,a({type:"GET_ONE_REPORT",data:r,id:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},N=a(39),Y=a.n(N),U=Object(c.b)((function(e){return console.log("report details state to props",e),{report:e.report,reportsList:e.reportsList,programs:e.programs,notification:e.notification,users:e.users,login:e.login}}),{createReport:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j}),t.next=4,M.createReport(e);case 4:r=t.sent,a({type:"CREATE_REPORT",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(r.useState)(""),a=Object(p.a)(t,2),l=a[0],o=a[1],c=Object(r.useState)(""),u=Object(p.a)(c,2),E=u[0],b=u[1],O=Object(r.useState)("".concat(e.login.first_name," ").concat(e.login.last_name)),h=Object(p.a)(O,2),j=h[0],x=h[1],w=Object(r.useState)(new Date),R=Object(p.a)(w,2),_=R[0],T=R[1],D=Object(r.useState)(""),S=Object(p.a)(D,2),C=S[0],P=S[1],L=Object(r.useState)(""),A=Object(p.a)(L,2),F=A[0],I=A[1],M=Object(r.useState)(!1),G=Object(p.a)(M,2),N=G[0],U=G[1];if(null===e.programs.allPrograms)return n.a.createElement("div",null,"loafing");console.log("create new report form props",e);var q=e.programs.allPrograms.map((function(e){return{key:e.id,text:e.name,value:e.id}}));return N&&null!==e.report.newReport?(console.log("create new report for after submit props",e),console.log("redirecting to id",e.report.newReport.id),n.a.createElement(i.a,{to:"reports/".concat(e.report.newReport.id)})):n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{divided:"vertically"},n.a.createElement(m.a.Row,{columns:2},n.a.createElement(m.a.Column,null,n.a.createElement(s.a,null,n.a.createElement(d.a,null,"Luo uusi raportti"),n.a.createElement(f.a,null,n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Ohjelma"),n.a.createElement(v.a,{placeholder:"Valitse ohjelma",openOnFocus:!0,selection:!0,search:!0,options:q,onChange:function(e,t){var a=t.value;e.preventDefault(),o(a),console.log(l)}})," "),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Ohjelmanumero"),n.a.createElement(y.a,{type:"number",value:E,onChange:function(e){return b(e.target.value)}})," "),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"DJ"),n.a.createElement(y.a,{type:"text",value:j,onChange:function(e){return x(e.target.value)}})," "),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Ohjelman p\xe4iv\xe4"),n.a.createElement(k.a,{selected:_,dateFormat:"yyyy-MM-dd",onChange:function(e){return T(e)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Alkaa kello"),n.a.createElement(v.a,{placeholder:"hh:mm",openOnFocus:!0,selection:!0,search:!0,options:[{key:"00:00",text:"00:00",value:"00:00"},{key:"01:00",text:"01:00",value:"01:00"},{key:"02:00",text:"02:00",value:"02:00"},{key:"03:00",text:"03:00",value:"03:00"},{key:"04:00",text:"04:00",value:"04:00"},{key:"05:00",text:"05:00",value:"05:00"},{key:"06:00",text:"06:00",value:"06:00"},{key:"07:00",text:"07:00",value:"07:00"},{key:"08:00",text:"08:00",value:"08:00"},{key:"09:00",text:"09:00",value:"09:00"},{key:"10:00",text:"10:00",value:"10:00"},{key:"11:00",text:"11:00",value:"11:00"},{key:"12:00",text:"12:00",value:"12:00"},{key:"13:00",text:"13:00",value:"13:00"},{key:"14:00",text:"14:00",value:"14:00"},{key:"15:00",text:"15:00",value:"15:00"},{key:"16:00",text:"16:00",value:"16:00"},{key:"17:00",text:"17:00",value:"17:00"},{key:"18:00",text:"18:00",value:"18:00"},{key:"19:00",text:"19:00",value:"19:00"},{key:"20:00",text:"20:00",value:"20:00"},{key:"21:00",text:"21:00",value:"21:00"},{key:"22:00",text:"22:00",value:"22:00"},{key:"23:00",text:"23:00",value:"23:00"}],onChange:function(e,t){var a=t.value;e.preventDefault(),P(a),console.log(C)}})," "),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"P\xe4\xe4ttyy kello"),n.a.createElement(v.a,{placeholder:"hh:mm",openOnFocus:!0,selection:!0,search:!0,options:[{key:"01:00",text:"01:00",value:"01:00"},{key:"02:00",text:"02:00",value:"02:00"},{key:"03:00",text:"03:00",value:"03:00"},{key:"04:00",text:"04:00",value:"04:00"},{key:"05:00",text:"05:00",value:"05:00"},{key:"06:00",text:"06:00",value:"06:00"},{key:"07:00",text:"07:00",value:"07:00"},{key:"08:00",text:"08:00",value:"08:00"},{key:"09:00",text:"09:00",value:"09:00"},{key:"10:00",text:"10:00",value:"10:00"},{key:"11:00",text:"11:00",value:"11:00"},{key:"12:00",text:"12:00",value:"12:00"},{key:"13:00",text:"13:00",value:"13:00"},{key:"14:00",text:"14:00",value:"14:00"},{key:"15:00",text:"15:00",value:"15:00"},{key:"16:00",text:"16:00",value:"16:00"},{key:"17:00",text:"17:00",value:"17:00"},{key:"18:00",text:"18:00",value:"18:00"},{key:"19:00",text:"19:00",value:"19:00"},{key:"20:00",text:"20:00",value:"20:00"},{key:"21:00",text:"21:00",value:"21:00"},{key:"22:00",text:"22:00",value:"22:00"},{key:"23:00",text:"23:00",value:"23:00"},{key:"23:59",text:"23:59",value:"23:59"}],onChange:function(e,t){var a=t.value;e.preventDefault(),I(a),console.log(F)}})," ")),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(g.a,{onClick:function(){var t={user_id:e.login.id,program_id:l,program_date:Y()(_).format("YYYY-MM-DD"),program_start_time:C,program_end_time:F,program_no:E,program_dj:j,status:0,rerun:null};e.createReport(t),console.log("create report button click pros",e.report.reportDetails),console.log("creating report:",t),U(!0)}},"Jatka"))))),n.a.createElement(m.a.Column,null,n.a.createElement(s.a,null,n.a.createElement(d.a,null,"Omat keskener\xe4iset raportit"),n.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Totam explicabo delectus sint quisquam minima, fugit ut magni voluptates ullam maiores quo, sit iure earum, iusto aut dignissimos odit accusantium quam deleniti laborum numquam mollitia. Laboriosam soluta asperiores maiores eum, culpa temporibus iste modi ut in esse excepturi beatae repudiandae alias cupiditate enim corrupti error repellendus accusantium perferendis facilis optio. Odio repellat sed sequi similique labore, necessitatibus repudiandae ratione voluptatibus autem alias iure ipsam. Fugiat sunt quam sapiente dolore asperiores sequi inventore, reiciendis, ullam magnam doloremque voluptas quod esse, a qui fuga itaque sit nesciunt aspernatur tenetur veritatis. Est, praesentium sit."))))))})),q=function(){return n.a.createElement(s.a,null,n.a.createElement("h2",null,"Radio Helsinki teostoraportointi"),n.a.createElement(U,null))},H=a(271),K=a.n(H),z=a(542),B=a(539),J=a(76),V=null,W={getAll:function(){var e=Object(h.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:V}},e.next=3,w.a.get("/api/users",t);case 3:return a=e.sent,console.log(typeof a.date),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){V="bearer ".concat(e)}},Q={setCurrent:function(e){return{type:"SET_CURRENT",payload:e}}},X=Object(c.b)(null,Q)((function(e){var t,a=Object(r.useState)(""),l=Object(p.a)(a,2),o=l[0],c=l[1],u=Object(r.useState)(""),i=Object(p.a)(u,2),s=i[0],m=i[1],v=Object(r.useState)(e.user.first_name),E=Object(p.a)(v,2),k=E[0],b=E[1],O=Object(r.useState)(e.user.last_name),h=Object(p.a)(O,2),j=h[0],x=h[1],w=Object(r.useState)(e.user.email),R=Object(p.a)(w,2),_=R[0],T=R[1],D=Object(r.useState)(e.user.level),S=Object(p.a)(D,2),C=S[0],P=S[1];return t=1===C?"DJ":2===C?"Toimitus":"Admin",n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(B.a,{trigger:n.a.createElement("a",{href:"#!",onClick:function(){return e.setCurrent(e.user)}},e.user.username),closeIcon:!0},n.a.createElement(d.a,{content:"Muokkaa k\xe4ytt\xe4j\xe4n tietoja"}),n.a.createElement(B.a.Content,null,n.a.createElement(f.a,{onSubmit:function(t){t.preventDefault(),console.log("updating info",o,s,k,j,_,C),console.log("for user",e.user.id)}},n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"K\xe4ytt\xe4j\xe4tunnus"),n.a.createElement(y.a,{value:e.user.username,type:"text",placeholder:"K\xe4ytt\xe4j\xe4tunnus...",disabled:!0})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Salasana - sy\xf6t\xe4 vaihtaaksesi"),n.a.createElement(y.a,{focus:!0,type:"password",placeholder:"Salasana...",onChange:function(e){return c(e.target.value)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Salasana uudelleen"),n.a.createElement(y.a,{focus:!0,type:"password",placeholder:"Vahvista salasana...",onChange:function(e){return m(e.target.value)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Etunimi"),n.a.createElement(y.a,{focus:!0,value:k,type:"text",placeholder:"Etunimi...",onChange:function(e){return b(e.target.value)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Sukunimi"),n.a.createElement(y.a,{focus:!0,value:j,type:"text",placeholder:"Sukunimi...",onChange:function(e){return x(e.target.value)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Email"),n.a.createElement(y.a,{focus:!0,value:_,type:"text",placeholder:"Email...",onChange:function(e){return T(e.target.value)}})),n.a.createElement(f.a.Field,{label:"Taso",control:"select",value:C,onChange:function(e){return P(e.target.value)}},n.a.createElement("option",{value:"1"},"DJ"),n.a.createElement("option",{value:"2"},"Toimitus"),n.a.createElement("option",{value:"3"},"Admin")),n.a.createElement(g.a,{type:"submit"},"Tallenna"))))),n.a.createElement(z.a.Cell,null,e.user.first_name," ",e.user.last_name),n.a.createElement(z.a.Cell,null,n.a.createElement(K.a,{format:"MMMM Do YYYY, h:mm:ss a"},e.user.last_seen)),n.a.createElement(z.a.Cell,null,t),n.a.createElement(z.a.Cell,null,n.a.createElement(J.a,{onClick:function(){console.log("klikd delete on user ".concat(e.user.id))},name:"delete"})))})),Z=a(547),$=a(537),ee=a(25);function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re={message:null},ne=function(e,t){return console.log(t),function(a){a({type:"NOTIFICATION",id:e,message:t})}},le=function(e){return{type:"CLEAR",id:e}},oe=0;function ce(e,t){return t*=1e3,function(a){var r=oe++;a(ne(r,e)),setTimeout((function(){a(le(r))}),t)}}var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(console.log("action",t),t.type){case"NOTIFICATION":return ae({},e,{message:t.message});case"CLEAR":return ae({},e,{message:null});default:return e}},ie={showNotificationWithTimeout:ce},se=Object(c.b)((function(e){return{users:e.users,login:e.login}}),ie)((function(e){return null===e.users.users||!0===e.users.loading?n.a.createElement(s.a,null,n.a.createElement(Z.a,{active:!0,inverted:!0},n.a.createElement($.a,{size:"medium"},"Haetaan k\xe4ytt\xe4ji\xe4..."))):(console.log("userlist props",e),n.a.createElement(s.a,null,n.a.createElement("h3",null,"K\xe4ytt\xe4j\xe4t"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"K\xe4ytt\xe4j\xe4tunnus"),n.a.createElement(z.a.Cell,null,"Nimi"),n.a.createElement(z.a.Cell,null,"Viimeisin kirjautuminen"),n.a.createElement(z.a.Cell,null,"Taso"))),n.a.createElement(z.a.Body,null,e.users.users.map((function(e){return n.a.createElement(X,{user:e,key:e.id})}))))))})),pe=function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j}),a({type:"CLEAR_CURRENT_REPORT"}),t.next=5,M.getAllByDate(e);case 5:r=t.sent,a({type:"GET_ALL_REPORTS_BY_DATE",data:r,date:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},me=a(145),de={getOneReport:G,getAllReportsByDate:pe,sortByUserId:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("id to filter",e),a({type:"SORT_BY_USER_ID",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},fe=Object(c.b)((function(e){return console.log("reportfilterform state to props",e),{report:e.report,reportsList:e.reportsList,notification:e.notification,users:e.users,login:e.login}}),de)((function(e){var t=Object(r.useState)(""),a=Object(p.a)(t,2),l=a[0],o=a[1],c=Object(r.useState)(""),u=Object(p.a)(c,2),i=u[0],s=u[1],m=Object(r.useState)(""),d=Object(p.a)(m,2),E=d[0],k=d[1],b=Object(r.useState)(""),O=Object(p.a)(b,2),h=O[0],j=O[1],x=Object(r.useState)(""),w=Object(p.a)(x,2),R=w[0],_=w[1];if(console.log(R),null===e.users.users)return n.a.createElement("div",null,"loading");for(var T=(new Date).getFullYear()+1,D=[],S=2001;S<=T;S++)D.push(S);var C=D.map((function(e){return{key:e,text:e,value:e}}));C=C.reverse();var P=e.users.users.map((function(e){return{key:e.id,text:"".concat(e.first_name," ").concat(e.last_name),value:e.id}})),L=[{key:0,text:"Kaikki",value:0}].concat(Object(me.a)(P));console.log(L),console.log(l),console.log(i);return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,null,n.a.createElement("h2",null,"Hae raportit ajalta:"),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null,n.a.createElement(v.a,{placeholder:"Kuukausi",openOnFocus:!1,selection:!0,options:[{key:"01",text:"Tammikuu",value:"01"},{key:"02",text:"Helmikuu",value:"02"},{key:"03",text:"Maaliskuu",value:"03"},{key:"04",text:"Huhtikuu",value:"04"},{key:"05",text:"Toukokuu",value:"05"},{key:"06",text:"Kes\xe4kuu",value:"06"},{key:"07",text:"Hein\xe4kuu",value:"07"},{key:"08",text:"Elokuu",value:"08"},{key:"09",text:"Syyskuu",value:"09"},{key:"10",text:"Lokakuu",value:"10"},{key:"11",text:"Marraskuu",value:"11"},{key:"12",text:"Joulukuu",value:"12"}],onChange:function(e,t){var a=t.value;e.preventDefault(),o(a)}})),n.a.createElement(f.a.Field,null,n.a.createElement(v.a,{placeholder:"Vuosi",openOnFocus:!0,selection:!0,options:C,onChange:function(e,t){var a=t.value;e.preventDefault(),s(a)}})," ")),n.a.createElement(f.a.Field,null,n.a.createElement(g.a,{onClick:function(){return function(){var t=i+"-"+l;console.log(t),console.log("klik"),e.getAllReportsByDate(t)}()}},"HAE")),n.a.createElement("h4",null,"Suodata:"),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null,n.a.createElement(v.a,{placeholder:"K\xe4ytt\xe4j\xe4",openOnFocus:!1,search:!0,selection:!0,options:L,onChange:function(t,a){var r=a.value;t.preventDefault(),k(r),console.log("user id",E),e.sortByUserId(E)}})),n.a.createElement(f.a.Field,null,n.a.createElement(v.a,{placeholder:"Tila",openOnFocus:!0,selection:!0,search:!0,options:[{key:"2",text:"Kaikki",value:"2"},{key:"0",text:"Keskener\xe4inen",value:"0"},{key:"1",text:"Valmis",value:"1"},{key:"9",text:"Poistettu",value:"9"}],onChange:function(e,t){var a=t.value;e.preventDefault(),j(a),console.log("tila",h)}})," "),n.a.createElement(f.a.Field,null,n.a.createElement(y.a,{type:"text",placeholder:"Tekstisuodatus",onChange:function(e){return _(e.target.value)}})))))})),ve=Object(c.b)(null,{getOneReport:G})((function(e){var t;if(1===e.report.status)t="Valmis";else if(0===e.report.status)t="Keskener\xe4inen";else if(9===e.report.status)return t="Poistettu",null;return n.a.createElement(n.a.Fragment,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,e.report.program_no),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"reports/".concat(e.report.id)},e.report.name)),n.a.createElement(z.a.Cell,null,e.report.program_date," ",e.report.program_start_time," -"," ",e.report.program_end_time),n.a.createElement(z.a.Cell,null,t),n.a.createElement(z.a.Cell,null)))})),ye=a(548),ge={showNotificationWithTimeout:ce,getAllReportsByDate:pe,getOneReport:G},Ee=Object(c.b)((function(e){return console.log("report list state to props",e),{report:e.report,reportsList:e.reportsList,notification:e.notification,login:e.login}}),ge)((function(e){return Object(r.useEffect)((function(){e.getAllReportsByDate(Y()().format("YYYY-MM"))}),[]),console.log("Reportlist props",e),null===e.reportsList.reportsList||e.reportsList.loading?n.a.createElement(ye.a,null,n.a.createElement(Z.a,{active:!0,inverted:!0},n.a.createElement($.a,{inverted:!0,content:"Ladataan..."}))):0===e.reportsList.reportsList.length?n.a.createElement(s.a,null,n.a.createElement("h2",null,"Ei raportteja valittuna ajankohtana. Valitse vuosi, kuukausi ja k\xe4ytt\xe4j\xe4"),n.a.createElement(fe,null)):n.a.createElement(s.a,null,n.a.createElement(fe,null),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Ohjelmanro"),n.a.createElement(z.a.Cell,null,"Nimi"),n.a.createElement(z.a.Cell,null,"Aika"),n.a.createElement(z.a.Cell,null,"Tila"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,e.reportsList.reportsList.map((function(e){return n.a.createElement(ve,{key:e.id,report:e})})))))})),ke={login:function(){var e=Object(h.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},be=null,Oe={getAll:function(){var e=Object(h.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:be}},e.next=3,w.a.get("/api/programs",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:be}},console.log("program req id",t),e.next=4,w.a.get("".concat("/api/programs","/").concat(t),a);case 4:return r=e.sent,console.log("programservice get one program data",r.data),e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){be="bearer ".concat(e)}},he=null,je={setToken:function(e){he="bearer ".concat(e)},getTracksForSearch:function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:he}},console.log("autocomplete search query",t),e.next=4,w.a.get("".concat("/api/search","/tracks/").concat(t),a);case 4:return r=e.sent,console.log("search service get autocomplete tracks req data",r.data),e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Re=null,_e={setToken:function(e){Re="bearer ".concat(e)},checkDjonlineTracks:function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r,n,l,o,c,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://www.djonline.fi/playing/playlog.php","?id=").concat(t.studioId,"&date=").concat(t.date));case 2:for(n in a=e.sent,r=[],a.data)r.push(a.data[n]);return r=r.reverse(),l=[],r.forEach((function(e,a){var r=e.date.charAt(11)+e.date.charAt(12);r=parseInt(r);var n=e.length.split(":"),o=60*parseInt(n[0])+parseInt(n[1]);r<parseInt(t.startTime)||r>=parseInt(t.endTime)||l.push({album_name:e.album,artist_name:e.artist,cat_id:e.matrix,disc_no:e.side,track_no:e.tracknumber,isrc:e.isrc,record_country:e.recording_country,country:null,play_time:e.date,djonline_id:e.id,label:e.label,length:o,track_title:e.song,year:e.year,report_id:t.report_id})})),o={headers:{Authorization:Re}},console.log("array of tracks going to backend",l),c=[],l.forEach((function(e,a){c.push(we({},e,{sortable_rank:t.sortable_rank_start+a+1}))})),u=[],console.log("new arr to backend with sortable ranks",c),c.forEach(function(){var e=Object(h.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat("/api/tracks","/djonline"),t,o);case 2:a=e.sent,u.push(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("returned array from backend",u),e.abrupt("return",u);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Te=Object(c.b)(null,{newLogin:function(e,t){return function(){var a=Object(h.a)(O.a.mark((function a(r){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:j}),a.next=4,ke.login(e);case 4:n=a.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),r({type:"LOGIN",data:n}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),t("v\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4tunnus tai salasana",4);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},showNotificationWithTimeout:ce})((function(e){var t=e.newLogin,a=Object(r.useState)(""),l=Object(p.a)(a,2),o=l[0],c=l[1],u=Object(r.useState)(""),i=Object(p.a)(u,2),s=i[0],m=i[1],d=function(){var e=Object(h.a)(O.a.mark((function e(a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),r={username:o,password:s},console.log(r),t(r,ce);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(f.a,{onSubmit:d},n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"K\xe4ytt\xe4j\xe4tunnus"),n.a.createElement("input",{type:"text",placeholder:"K\xe4ytt\xe4j\xe4tunnus...",onChange:function(e){return c(e.target.value)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Salasana"),n.a.createElement("input",{type:"password",placeholder:"Salasana...",onChange:function(e){return m(e.target.value)}})),n.a.createElement(g.a,{type:"submit"},"Kirjaudu"))})),De=Object(c.b)((function(e){return console.log("report transfer options state to props",e),{reportsList:e.reportsList,notification:e.notification}}),{getAllReportsByDate:pe})((function(e){console.log("report transfer options props",e);var t=Object(r.useState)(new Date),a=Object(p.a)(t,2),l=a[0],o=a[1];Object(r.useEffect)((function(){e.getAllReportsByDate(Y()(l).format("YYYY-MM"))}),[l]);return null===e.reportsList.reportsList?n.a.createElement("div",null,"loading"):n.a.createElement("div",null,n.a.createElement(d.a,null,"Hae siirtotiedosto ajalta:"),n.a.createElement(f.a,null,n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null,n.a.createElement(k.a,{selected:l,dateFormat:"MMMM yyyy",onChange:function(e){return o(e)},showMonthYearPicker:!0})),n.a.createElement(f.a.Field,null),n.a.createElement(f.a.Field,null,n.a.createElement(g.a,{onClick:function(){console.log("transferring file from ",Y()(l).format("YYYY-MM"))}},"HAE")))))})),Se=Object(c.b)(null,{downloadReport:I})((function(e){return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,e.item.created_at),n.a.createElement(z.a.Cell,null,e.item.first_name," ",e.item.last_name),n.a.createElement(z.a.Cell,null,e.item.period),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"#",onClick:function(){return t=e.item.filename,void I(t);var t}},e.item.filename)))})),Ce={getAllTransfers:function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:j}),e.next=4,M.getAllTransfers();case 4:a=e.sent,t({type:"GET_ALL_REPORT_TRANSFERS",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},Pe=Object(c.b)((function(e){return console.log("report list state to props",e),{report:e.report,reportsList:e.reportsList,notification:e.notification,login:e.login}}),Ce)((function(e){return console.log("report transfer list props",e),Object(r.useEffect)((function(){e.getAllTransfers()}),[]),null===e.reportsList.reportTransferList?n.a.createElement("div",null,"loading"):n.a.createElement(s.a,null,n.a.createElement("h1",null,"Siirtotiedostot"),n.a.createElement(De,null),n.a.createElement(z.a,null,n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Luontip\xe4iv\xe4m\xe4\xe4r\xe4"),n.a.createElement(z.a.Cell,null,"K\xe4ytt\xe4j\xe4"),n.a.createElement(z.a.Cell,null,"Raportin ajankohta"),n.a.createElement(z.a.Cell,null,"Siirtotiedosto"))),n.a.createElement(z.a.Body,null,e.reportsList.reportTransferList.map((function(e){return n.a.createElement(Se,{key:e.id,item:e})})))))})),Le=a(544),Ae=Object(c.b)((function(e){return{report:e.report,reportsList:e.reportsList,notification:e.notification}}),{deleteTrackFromReport:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j}),t.next=4,M.deleteTrackFromReport(e.report_track_id);case 4:return r=t.sent,console.log(r),t.next=8,M.getOne(e.report_id);case 8:n=t.sent,console.log("reportactions",n),a({type:"GET_ONE_REPORT",data:n}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Math.floor(e.track.length/60),a=e.track.length-60*t;return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,e.track.sortable_rank),n.a.createElement(z.a.Cell,null,e.track.artist_name),n.a.createElement(z.a.Cell,null,e.track.track_title),n.a.createElement(z.a.Cell,null,t,":",a),n.a.createElement(z.a.Cell,null,n.a.createElement(J.a,{onClick:function(){var t={report_track_id:e.track.report_track_id,report_id:e.report.reportDetails.id};console.log(t),e.deleteTrackFromReport(t),console.log("klikd delete")},name:"delete"})),n.a.createElement(z.a.Cell,null,n.a.createElement(J.a,{onClick:function(){console.log("klikd edit")},name:"edit"})))})),Fe=a(543),Ie=Object(c.b)((function(e){return console.log("search track state to props",e),{search:e.search,report:e.report}}),{getAutocompleteResults:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_SEARCH_LOADING"}),t.next=4,je.getTracksForSearch(e);case 4:r=t.sent,console.log(r),a({type:"AUTOCOMPLETE_RESULTS",data:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},addTrackToReport:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j}),t.next=4,M.addTrackToReport(e);case 4:return r=t.sent,console.log("add track to report track",r),t.next=8,M.getOne(r.report_id);case 8:n=t.sent,console.log("reportactions",n),a({type:"GET_ONE_REPORT",data:n}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.search,a=e.report,l=e.getAutocompleteResults,o=e.addTrackToReport;console.log("search track props",t);var c=Object(r.useState)(""),u=Object(p.a)(c,2),i=u[0],s=u[1],v=Object(r.useState)(null),y=Object(p.a)(v,2),E=y[0],k=y[1];Object(r.useEffect)((function(){var e=null;console.log("fire when typed to search",i),clearTimeout(e),e=setTimeout((function(){i.length>=3&&l(i)}),1e3)}),[i]);var b=function(e,t){var r=t.result,n={track_id:r.value,report_id:a.reportDetails.id,length:r.length,sortable_rank:a.report.length+1};console.log("handling result select",n),k(n)},O=t.searchResults.map((function(e){return{key:e.track_id,title:e.track_title+" "+e.artist,length:e.length,value:e.track_id}}));return n.a.createElement("div",{style:{marginLeft:"1rem",marginBottom:"1rem"}},n.a.createElement(m.a,{divided:"vertically"},n.a.createElement(m.a.Row,{columns:"2"},n.a.createElement(f.a,null,n.a.createElement(d.a,null,"Hae"),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null,n.a.createElement(Fe.a,{loading:t.loading,onResultSelect:b,onSearchChange:function(e,t){var a=t.value;s(a),i.length>=3&&setTimeout((function(){l(i)}),300)},onSelectionChange:b,results:O})),n.a.createElement(f.a.Field,null,n.a.createElement(g.a,{onClick:function(){console.log("klikd save",E),o(E),s(""),k(null)}},"Lis\xe4\xe4 biisi raporttiin"))),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null," ",n.a.createElement(g.a,null,"Tarkennettu haku")),n.a.createElement(f.a.Field,null," ",n.a.createElement(g.a,null,"Lis\xe4\xe4 uusi biisi")))))))})),Me=Object(c.b)((function(e){return console.log("getdjonlinetracks state to props",e),{report:e.report,reportsList:e.reportsList,programs:e.programs,notification:e.notification,users:e.users,login:e.login}}),{getDjonlineTracks:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j}),t.next=4,_e.checkDjonlineTracks(e);case 4:r=t.sent,a({type:"GET_DJONLINE_TRACKS",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(r.useState)(new Date),a=Object(p.a)(t,2),l=a[0],o=a[1],c=Object(r.useState)("928"),u=Object(p.a)(c,2),i=u[0],s=u[1],y=Object(r.useState)(""),E=Object(p.a)(y,2),b=E[0],O=E[1],h=Object(r.useState)(""),j=Object(p.a)(h,2),x=j[0],w=j[1];return n.a.createElement("div",{style:{marginLeft:"1rem",marginBottom:"1rem"}},n.a.createElement(m.a,{divided:"vertically"},n.a.createElement(m.a.Row,{columns:2},n.a.createElement(f.a,null,n.a.createElement(d.a,null,"Hae biisit DJOnlinesta"),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Valitse p\xe4iv\xe4"),n.a.createElement(k.a,{selected:l,dateFormat:"yyyy-MM-dd",onChange:function(e){return o(e)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Valitse studio"),n.a.createElement(v.a,{placeholder:"Studio 1",openOnFocus:!0,selection:!0,options:[{key:"928",text:"Studio 1",value:"928"},{key:"1047",text:"Studio 2",value:"1047"}],onChange:function(e,t){var a=t.value;e.preventDefault(),s(a)}})," ")),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Alkaen kello"),n.a.createElement(v.a,{placeholder:"Alkaen HH:MM",openOnFocus:!0,selection:!0,search:!0,options:[{key:"00:00",text:"00:00",value:"00"},{key:"01:00",text:"01:00",value:"01"},{key:"02:00",text:"02:00",value:"02"},{key:"03:00",text:"03:00",value:"03"},{key:"04:00",text:"04:00",value:"04"},{key:"05:00",text:"05:00",value:"05"},{key:"06:00",text:"06:00",value:"06"},{key:"07:00",text:"07:00",value:"07"},{key:"08:00",text:"08:00",value:"08"},{key:"09:00",text:"09:00",value:"09"},{key:"10:00",text:"10:00",value:"10"},{key:"11:00",text:"11:00",value:"11"},{key:"12:00",text:"12:00",value:"12"},{key:"13:00",text:"13:00",value:"13"},{key:"14:00",text:"14:00",value:"14"},{key:"15:00",text:"15:00",value:"15"},{key:"16:00",text:"16:00",value:"16"},{key:"17:00",text:"17:00",value:"17"},{key:"18:00",text:"18:00",value:"18"},{key:"19:00",text:"19:00",value:"19"},{key:"20:00",text:"20:00",value:"20"},{key:"21:00",text:"21:00",value:"21"},{key:"22:00",text:"22:00",value:"22"},{key:"23:00",text:"23:00",value:"23"}],onChange:function(e,t){var a=t.value;e.preventDefault(),O(a)}})," "),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"P\xe4\xe4ttyen kello"),n.a.createElement(v.a,{placeholder:"P\xe4\xe4ttyen HH:MM",openOnFocus:!0,selection:!0,search:!0,options:[{key:"01:00",text:"01:00",value:"01"},{key:"02:00",text:"02:00",value:"02"},{key:"03:00",text:"03:00",value:"03"},{key:"04:00",text:"04:00",value:"04"},{key:"05:00",text:"05:00",value:"05"},{key:"06:00",text:"06:00",value:"06"},{key:"07:00",text:"07:00",value:"07"},{key:"08:00",text:"08:00",value:"08"},{key:"09:00",text:"09:00",value:"09"},{key:"10:00",text:"10:00",value:"10"},{key:"11:00",text:"11:00",value:"11"},{key:"12:00",text:"12:00",value:"12"},{key:"13:00",text:"13:00",value:"13"},{key:"14:00",text:"14:00",value:"14"},{key:"15:00",text:"15:00",value:"15"},{key:"16:00",text:"16:00",value:"16"},{key:"17:00",text:"17:00",value:"17"},{key:"18:00",text:"18:00",value:"18"},{key:"19:00",text:"19:00",value:"19"},{key:"20:00",text:"20:00",value:"20"},{key:"21:00",text:"21:00",value:"21"},{key:"22:00",text:"22:00",value:"22"},{key:"23:00",text:"23:00",value:"23"},{key:"24:00",text:"24:00",value:"24"}],onChange:function(e,t){var a=t.value;e.preventDefault(),w(a)}})," ")),n.a.createElement(g.a,{onClick:function(){var t={studioId:i,date:Y()(l).format("YYYY-MM-DD"),startTime:b,endTime:x,report_id:e.report.reportDetails.id,sortable_rank_start:e.report.report.length};e.getDjonlineTracks(t)}},"Hae")))))})),Ge=function(e){var t=Object(r.useState)(!1),a=Object(p.a)(t,2),l=a[0],o=a[1],c={display:l?"none":""},u={display:l?"":"none"},i=function(){o(!l)};return n.a.createElement("div",null,n.a.createElement("div",{style:c},n.a.createElement(g.a,{onClick:i},e.buttonLabel)),n.a.createElement("div",{style:u},e.children,n.a.createElement(g.a,{onClick:i},"Piilota")))},Ne=Object(c.b)((function(e){return console.log("report details state to props",e),{report:e.report,reportsList:e.reportsList,programs:e.programs,notification:e.notification,users:e.users,login:e.login}}),{updateReport:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j}),t.next=4,M.updateReport(e);case 4:r=t.sent,a({type:"UPDATE_REPORT",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(r.useState)(""),a=Object(p.a)(t,2),l=a[0],o=a[1],c=Object(r.useState)(""),u=Object(p.a)(c,2),i=u[0],s=u[1],y=Object(r.useState)(""),E=Object(p.a)(y,2),b=E[0],O=E[1],h=Object(r.useState)(""),j=Object(p.a)(h,2),x=j[0],w=j[1],R=Object(r.useState)(""),_=Object(p.a)(R,2),T=_[0],D=_[1],S=Object(r.useState)(""),C=Object(p.a)(S,2),P=C[0],L=C[1],A=Object(r.useState)(""),F=Object(p.a)(A,2),I=F[0],M=F[1],G=Object(r.useState)(""),N=Object(p.a)(G,2),U=N[0],q=N[1],H=Object(r.useState)(null),K=Object(p.a)(H,2),z=K[0],B=K[1];if(console.log("report detauls props",e),Object(r.useEffect)((function(){null!==e.report.reportDetails&&(q(e.report.reportDetails.user_id),o(e.report.reportDetails.program_id),O(e.report.reportDetails.program_dj),s(e.report.reportDetails.program_no),w(new Date(e.report.reportDetails.program_date)),D(e.report.reportDetails.program_start_time),L(e.report.reportDetails.program_end_time),M(e.report.reportDetails.status),B(e.report.reportDetails.rerun))}),[e.report.reportDetails]),null===e.report.reportDetails||null===e.users.users)return n.a.createElement(ye.a,null,n.a.createElement(Z.a,{active:!0,inverted:!0},n.a.createElement($.a,{inverted:!0,content:"Ladataan..."})));var J,V=e.programs.allPrograms.map((function(e){return{key:e.id,text:e.name,value:e.id}})),W=e.users.users.map((function(e){return{key:e.id,text:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));0===I?J="Keskener\xe4inen":1===I?J="Valmis":9===J&&(J="Poistettu");return n.a.createElement("div",null,n.a.createElement(d.a,null,"Lis\xe4\xe4 biisi raporttiin:"),n.a.createElement(ye.a.Group,{horizontal:!0},n.a.createElement(ye.a,null,n.a.createElement(Ge,{buttonLabel:"Pikahaku"},n.a.createElement(Ie,null))),n.a.createElement(ye.a,null,n.a.createElement(Ge,{buttonLabel:"Hae biisit DJonlinesta"},n.a.createElement(Me,null)))),n.a.createElement(m.a,{divided:"vertically"},n.a.createElement(m.a.Row,{columns:2},n.a.createElement(m.a.Column,null,n.a.createElement(d.a,null,"Raportin tiedot:"),n.a.createElement(f.a,null,n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Ohjelma"),n.a.createElement(v.a,{placeholder:"Ohjelma",openOnFocus:!0,selection:!0,value:l,search:!0,options:V,onChange:function(e,t){var a=t.value;e.preventDefault(),o(a)}})," "),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Ohjelmanumero"),n.a.createElement(f.a.Input,{value:i,onChange:function(e){return s(e.target.value)}})," "),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"DJ"),n.a.createElement(f.a.Input,{value:b,onChange:function(e){return O(e.target.value)}})," "),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Ohjelman p\xe4iv\xe4"),n.a.createElement(k.a,{selected:x,dateFormat:"yyyy-MM-dd",onChange:function(e){return w(e)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Alkaa kello"),n.a.createElement(v.a,{placeholder:T,openOnFocus:!0,selection:!0,search:!0,options:[{key:"00:00",text:"00:00",value:"00:00"},{key:"01:00",text:"01:00",value:"01:00"},{key:"02:00",text:"02:00",value:"02:00"},{key:"03:00",text:"03:00",value:"03:00"},{key:"04:00",text:"04:00",value:"04:00"},{key:"05:00",text:"05:00",value:"05:00"},{key:"06:00",text:"06:00",value:"06:00"},{key:"07:00",text:"07:00",value:"07:00"},{key:"08:00",text:"08:00",value:"08:00"},{key:"09:00",text:"09:00",value:"09:00"},{key:"10:00",text:"10:00",value:"10:00"},{key:"11:00",text:"11:00",value:"11:00"},{key:"12:00",text:"12:00",value:"12:00"},{key:"13:00",text:"13:00",value:"13:00"},{key:"14:00",text:"14:00",value:"14:00"},{key:"15:00",text:"15:00",value:"15:00"},{key:"16:00",text:"16:00",value:"16:00"},{key:"17:00",text:"17:00",value:"17:00"},{key:"18:00",text:"18:00",value:"18:00"},{key:"19:00",text:"19:00",value:"19:00"},{key:"20:00",text:"20:00",value:"20:00"},{key:"21:00",text:"21:00",value:"21:00"},{key:"22:00",text:"22:00",value:"22:00"},{key:"23:00",text:"23:00",value:"23:00"}],onChange:function(e,t){var a=t.value;e.preventDefault(),D(a)}})," "),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"P\xe4\xe4ttyy kello"),n.a.createElement(v.a,{placeholder:P,openOnFocus:!0,selection:!0,search:!0,options:[{key:"01:00",text:"01:00",value:"01:00"},{key:"02:00",text:"02:00",value:"02:00"},{key:"03:00",text:"03:00",value:"03:00"},{key:"04:00",text:"04:00",value:"04:00"},{key:"05:00",text:"05:00",value:"05:00"},{key:"06:00",text:"06:00",value:"06:00"},{key:"07:00",text:"07:00",value:"07:00"},{key:"08:00",text:"08:00",value:"08:00"},{key:"09:00",text:"09:00",value:"09:00"},{key:"10:00",text:"10:00",value:"10:00"},{key:"11:00",text:"11:00",value:"11:00"},{key:"12:00",text:"12:00",value:"12:00"},{key:"13:00",text:"13:00",value:"13:00"},{key:"14:00",text:"14:00",value:"14:00"},{key:"15:00",text:"15:00",value:"15:00"},{key:"16:00",text:"16:00",value:"16:00"},{key:"17:00",text:"17:00",value:"17:00"},{key:"18:00",text:"18:00",value:"18:00"},{key:"19:00",text:"19:00",value:"19:00"},{key:"20:00",text:"20:00",value:"20:00"},{key:"21:00",text:"21:00",value:"21:00"},{key:"22:00",text:"22:00",value:"22:00"},{key:"23:00",text:"23:00",value:"23:00"},{key:"23:59",text:"23:59",value:"23:59"}],onChange:function(e,t){var a=t.value;e.preventDefault(),L(a)}})," ")),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Raportin tila"),n.a.createElement(v.a,{placeholder:J,openOnFocus:!0,selection:!0,options:[{key:"0",text:"Keskener\xe4inen",value:"0"},{key:"1",text:"Valmis",value:"1"},{key:"9",text:"Poistettu",value:"9"}],onChange:function(e,t){var a=t.value;e.preventDefault(),M(a)},value:I})," "),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"K\xe4ytt\xe4j\xe4"),n.a.createElement(v.a,{placeholder:"K\xe4ytt\xe4j\xe4",openOnFocus:!1,value:U,selection:!0,search:!0,options:W,onChange:function(e,t){var a=t.value;e.preventDefault(),q(a)}})),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Uusinta"),n.a.createElement(f.a.Checkbox,{name:"rerun",onChange:function(){console.log("getting rerun"),B(null===z?1:null)},checked:!!z})),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(g.a,{onClick:function(t){t.preventDefault();var a={id:e.report.reportDetails.id,user_id:U,program_id:l,program_date:Y()(x).format("YYYY-MM-DD"),program_start_time:T,program_end_time:P,program_no:i,program_dj:b,status:I,rerun:z};console.log("saving changes...",a),e.updateReport(a)}},"Tallenna"),n.a.createElement(g.a,{onClick:function(e){e.preventDefault(),console.log("klikd copy")}},"Monista")))))))})),Ye=Object(c.b)((function(e){return console.log("reportwithtracks state",e),{report:e.report,reportsList:e.reportsList}}),{getOneReport:G,getReportDetails:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j}),t.next=4,M.getReportDetails(e);case 4:r=(r=t.sent)[0],console.log("report actions report",r),a({type:"GET_REPORT_DETAILS",data:r,id:e}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(r.useEffect)((function(){setTimeout((function(){void 0===e.id?e.getOneReport(e.report.reportDetails.id):e.getOneReport(e.id)}),1e3)}),[e.report.djonline]),Object(r.useEffect)((function(){void 0===e.id?e.getReportDetails(e.report.reportDetails.id):(console.log("get details of report ",e.id),e.getReportDetails(e.id))}),[]),console.log("report with tracks props",e),null===e.report.report?n.a.createElement(ye.a,null,n.a.createElement(Z.a,{active:!0,inverted:!0},n.a.createElement($.a,{inverted:!0,content:"Ladataan..."}))):n.a.createElement(s.a,null,n.a.createElement("h3",null,"Raportti"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"#"),n.a.createElement(z.a.Cell,null,"Artisti"),n.a.createElement(z.a.Cell,null,"Biisi"),n.a.createElement(z.a.Cell,null,"Kesto"),n.a.createElement(z.a.Cell,null),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,e.report.report.map((function(e){return n.a.createElement(Ae,{key:e.report_track_id,track:e})})))),n.a.createElement(Ne,{report:e.report.reportDetails}))})),Ue={initializeUser:function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:j}),(a=window.localStorage.getItem("loggedUser"))&&(r=JSON.parse(a),W.setToken(r.token),M.setToken(r.token),Oe.setToken(r.token),je.setToken(r.token),_e.setToken(r.token),t({type:"INIT_USER",data:r}))}catch(n){t({type:"LOGIN_ERROR",payload:n.response.statusText})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},initializePrograms:function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:j}),e.next=4,Oe.getAll();case 4:a=e.sent,t({type:"GET_ALL_PROGRAMS",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},initializeUsers:function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:j}),e.next=4,W.getAll();case 4:a=e.sent,t({type:"INIT_USERS_LIST",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"USER_ERROR",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},qe=Object(c.b)((function(e){return console.log("app state",e),{reportsList:e.reportsList,login:e.login,users:e.users,programs:e.programs}}),Ue)((function(e){Object(r.useEffect)((function(){e.initializeUser(),e.initializePrograms(),e.initializeUsers()}),[]);return console.log("app 74",e),null===e.login.user?n.a.createElement(s.a,null,n.a.createElement(Te,null)):n.a.createElement(u.a,null,n.a.createElement("div",null,"Logged in as ",e.login.username,n.a.createElement("button",{onClick:function(){e.logout()}},"logout"),n.a.createElement(Le.a,{inverted:!0},n.a.createElement(Le.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},"Etusivu")),n.a.createElement(Le.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},"Raportit")),n.a.createElement(Le.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},"Top 100")),n.a.createElement(Le.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},"Haku")),n.a.createElement(Le.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},"Siirtotiedostot")),n.a.createElement(Le.a.Item,{link:!0},n.a.createElement(u.b,{to:"/users"},"K\xe4ytt\xe4j\xe4t")),n.a.createElement(Le.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},"Ohjelmat")),n.a.createElement(Le.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},"Omat tiedot")))),n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/",component:q}),n.a.createElement(i.b,{exact:!0,path:"/reports",component:Ee}),n.a.createElement(i.b,{exact:!0,path:"/transfer",component:Pe}),n.a.createElement(i.b,{path:"/reports/:id",render:function(e){var t=e.match;return console.log("*"),n.a.createElement(Ye,{id:t.params.id})}}),n.a.createElement(i.b,{exact:!0,path:"/users",component:se})))})),He=a(74),Ke=a(282),ze=a(283);function Be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Be(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ve={user:null,loading:!1,error:null},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":return t.data;case"LOGOUT":return Ve;case"LOGIN":return t.data;case"LOGIN_ERROR":return console.error(t.payload),Je({},e,{error:t.payload});case j:return Je({},e,{loading:!0});default:return e}};function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ze={report:[],djonline:null,reportDetails:null,newReport:null,loading:!1,error:null},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(console.log("reportreducer state now: ",e),console.log("reportreducer action",t),console.log(t.type),t.type){case"GET_ONE_REPORT":return Xe({},e,{report:t.data,loading:!1});case"GET_DJONLINE_TRACKS":return Xe({},e,{report:[].concat(Object(me.a)(e.report),[t.data.map((function(e){return e}))]),djonline:t.data,loading:!1});case"GET_REPORT_DETAILS":return Xe({},e,{reportDetails:t.data,newReport:null});case"CREATE_REPORT":return Xe({},e,{newReport:t.data,loading:!1});case"UPDATE_REPORT":return Xe({},e,{reportDetails:t.data,newReport:null,loading:!1});case"DELETE_TRACK_FROM_REPORT":return Xe({},e,{report:e.report.filter((function(e){return e.report_track_id!==t.id}))});case"CLEAR_CURRENT_REPORT":return Xe({},e,{report:[]});case j:return Xe({},e,{loading:!0});case"REPORT_ERROR":return console.error(t.payload),Xe({},e,{error:t.payload});default:return e}};function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var at={users:null,current:null,loading:!1,error:null},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS_LIST":return tt({},e,{users:t.data,loading:!1});case j:return tt({},e,{loading:!1});case"SET_CURRENT":return tt({},e,{current:t.payload});case"USER_ERROR":return console.error(t.payload),tt({},e,{error:t.payload});default:return e}};function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ot={reportsList:null,reportTransferList:null,loading:!1,error:null},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(console.log("report list reducer state now: ",e),console.log("report list reducer action",t),console.log(t.type),t.type){case"GET_ALL_REPORTS_BY_DATE":return lt({},e,{reportsList:t.data,loading:!1});case"GET_ALL_REPORT_TRANSFERS":return lt({},e,{reportTransferList:t.data,loading:!1});case"SORT_BY_USER_ID":return console.log("action id",t.id),lt({},e,{reportsList:e.reportsList.filter((function(e){return e.user_id===t.id}))});case j:return lt({},e,{loading:!0});case"REPORT_ERROR":return console.error(t.payload),lt({},e,{error:t.payload});default:return e}};function ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function it(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ut(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ut(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var st={allPrograms:null,program:null,loading:!1},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_PROGRAMS":return it({},e,{allPrograms:t.data,loading:!1});case"GET_ONE_PROGRAM":return it({},e,{program:t.data,loading:!1});default:return e}};function mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function dt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mt(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ft={searchResults:[],trackResults:null,artistResults:null,albumResults:null,loading:!1,error:null},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(console.log("searchReducer state now: ",e),console.log("searchReducer action",t),console.log("searchReducer action.type",t.type),t.type){case"AUTOCOMPLETE_RESULTS":return dt({},e,{searchResults:t.data,loading:!1});case"SET_SEARCH_LOADING":return dt({},e,{loading:!0});default:return e}},yt=Object(He.combineReducers)({login:We,notification:ue,report:$e,reportsList:ct,programs:pt,search:vt,users:rt}),gt=Object(He.createStore)(yt,Object(ze.composeWithDevTools)(Object(He.applyMiddleware)(Ke.a)));a(523);o.a.render(n.a.createElement(c.a,{store:gt},n.a.createElement(qe,null)),document.getElementById("root"))}},[[295,1,2]]]);
//# sourceMappingURL=main.8c94279d.chunk.js.map